	
	Система протоколов является трёхуровневой.

	Протокол первого уровня (cspyp1) обеспечивает базовое соединение 
клиентов и администраторов к серверу, а так же пересылку команд между
администратором-клиентом, и наоборот.

	Протокол второго уровня (cspyp2) работает поверх протокола первого
уровня. Он обеспечивает получение информации о поддерживаемых режимах,
а так же соединение по одному из режимов (списки режимов в описании).

	Протоколы третьего уровня. Несколько протоколов (по одному протоколу
для каждого из режимов). Обеспечивают функциональность, требуемую режимом
Например, для консольного режима один протокол третьего уровня, для 
графического режима - другой (например, на основе VNC), для аудио -
третий, и т. п.

// --------------------------------------------------

	Протокол первого уровня: (cspyp1)


При установке соединения клиент посылает информацию о себе в следующем виде:

cspycli:1:184a9ef35b31ea490dd3131313131332:

cspycli		протокол
1		версия протокола
184a9...	md5 - уникальный идентиффикатор клиента

В случае неудачи, соедиенение разорвётся.


Администратор посылает следующую информацию:

cspyadm:1:admin:admin:

В случае неудачи, соединение разорвётся.


Администратор может посылать следующие запросы:

l:

 - получить список всех подключенных клиентов

Сервер должен ответить:

l:1;md51;2;md52;3;md53...:

где 1, 2, 3 - уникальные номера (сокеты) клиентов
md51, md52, md53 - уникальные идентиффикаторы клиентов


t:5:15:someInformation:

 - отправить какую-то информацию клиенту
5 - номер клиента
15 - длина сообщения


Сервер может прислать:

f:5:18:resonseInformation:

 - пришла какая-то информация от клиента
5 - номер клиента
18 - длина сообщения

Те же самые команды используются клиентом. Но с ограничениями.
Клиент не может первым послать команду администратору. Клиент
не может посылать команды другому клиенту.


В случае дисконнекта клиент или администратор должен
послать на сервер команду:
d:

При отключении клиента сервер посылает всем
администраторам новый список клиентов

// --------------------------------------------------

	Протокол второго уровня: (cspyp2)


Администратор может посылать клиенту следующие запросы:

Запросы:

l:
 - перечислить поддерживаемые режимы (протоколы 2-го уровня)

Клиент должен ответить:

m:1;2;4:


a:1:
 - активировать режим 1

Клиент должен начать передавать данные, требуемые режимом 1


d:1:
 - отключить режим 1

Клиент должен перестать передавать данные режима 1


1:32:data....:

передача данных режима (протокола) 1
длина данных: 32

В таком же формате данные передаются обратно


// --------------------------------------------------

	Серия протоколов третьего уровня


Каждому режиму соответствует свой протокол. У каждого протокола
есть уникальный номер.

Список протоколов и их номеров:

1) консольный доступ (cmd/bash/etc)
2) графический доступ (vnc-like)
3) файловый доступ
4) доступ к медиаустройствам (микрофон, камера)
5) прокси доступ (возможность администратору использовать клиента как прокси)
6) редирект трафика (возможность открытие порта у клиента и перенаправление трафика на администратора)
7 и выше) прочие режимы


// --------------------------------------------------

	Консольный протокол третьего уровня (cspyp3-1)
	
Администратор может отправить клиенту любую консольную команду,
поддерживаемую удалённой системой.

Например:

ls

В качестве обозночения конца команды используется \n

В ответ клиент посылает администратору результат работы
заданной команды.
